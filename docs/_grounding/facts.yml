version: 1
project: three_node_mesh_infrastructure
approach: platform_as_code
last_updated: 2025-09-07
owner: verlyn13

# Immutable System Facts
nodes:
  hetzner:
    hostname: docker-cx32-prod
    tailscale_hostname: hetzner-hq
    public_ipv4: 91.99.101.204
    tailscale_ipv4: 100.84.151.58
    ssh_port: 2222
    role: [hub, headquarters, server, exit_node]
    always_on: true
    status: deployed
    deployed_date: 2025-09-07
  laptop:
    hostname: fedora-top
    tailscale_hostname: laptop-hq
    tailscale_ipv4: 100.84.2.8
    role: [workstation, roaming]
    roaming: true
    status: deployed
    deployed_date: 2025-09-06
  wsl:
    hostname: wsl-fedora-kbc
    tailscale_hostname: wsl-fedora-kbc
    windows_host: KBC-JJOHNSON47
<<<<<<< Updated upstream
    tailscale_ipv4: 100.88.131.44
    role: [workstation, windows_dev_env, bridge_node]
    constraints: [no_windows_admin, wsl2]
    status: deployed
    deployed_date: 2025-09-07
||||||| Stash base
    role: [workstation, windows_dev_env]
    constraints: [no_windows_admin, wsl2]
    status: pending
=======
    role: [workstation, windows_dev_env]
    constraints: [no_windows_admin, wsl2, work_pc]
    status: pending
    target_deployment: 2025-09-08
    special_requirements:
      - tailscale_userspace_networking
      - limited_sudo_access
      - corporate_network_restrictions
>>>>>>> Stashed changes

network:
  internal_domain: hq
  mesh_implementation: tailscale
  tailscale_network: 100.64.0.0/10
  advertised_routes: [172.20.0.0/16]  # Docker networks
  derp_relay: nuremberg
  auth_email: jeffreyverlynjohnson@gmail.com

security:
  ssh_user: verlyn13
  token_expiry: 24h
  admin_ports: [22, 443, 8080]
  emergency_ssh: 2222

tools:
  vpn: tailscale
  config_mgmt: ansible  # operational
  secrets: gopass
  orchestration: systemd

phases:
  phase1_network:
    status: complete
    completion_date: 2025-09-06
    description: "Tailscale mesh network established"
    nodes_deployed: [hetzner-hq, laptop-hq]
    nodes_pending: [wsl-hq]
  phase2_config:
    status: complete
    completion_date: 2025-09-07
    description: "Ansible configuration management operational"
    control_node: hetzner-hq
    managed_nodes: [laptop-hq]
    pending_nodes: [wsl-hq]
  phase3_sync:
    status: ready
    description: "File synchronization with Syncthing"
    target_nodes: [hetzner-hq, laptop-hq, wsl-hq]
    wsl_considerations: "userspace_networking_mode"